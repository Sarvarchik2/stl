üöÄ Starting STL Auto Platform...

[1;33mChecking PostgreSQL...[0m
[1;33m‚ö†Ô∏è  PostgreSQL is not running on port 5433[0m
Please start PostgreSQL first:
  brew services start postgresql@14

Or update the DATABASE_URL in backend/.env

[0;34mStarting Backend (Port 8000)...[0m
INFO:     Will watch for changes in these directories: ['/Users/ula/Desktop/stl-admin/backend']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [57252] using WatchFiles
INFO:     Started server process [57257]
INFO:     Waiting for application startup.
2026-02-07 16:41:50,044 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2026-02-07 16:41:50,044 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-07 16:41:50,046 INFO sqlalchemy.engine.Engine select current_schema()
2026-02-07 16:41:50,046 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-07 16:41:50,046 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2026-02-07 16:41:50,046 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-07 16:41:50,047 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-07 16:41:50,048 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 16:41:50,049 INFO sqlalchemy.engine.Engine [generated in 0.00007s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 16:41:50,053 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 16:41:50,053 INFO sqlalchemy.engine.Engine [cached since 0.004591s ago] ('cars_catalog', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 16:41:50,053 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 16:41:50,053 INFO sqlalchemy.engine.Engine [cached since 0.00503s ago] ('cars_price_history', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 16:41:50,054 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 16:41:50,054 INFO sqlalchemy.engine.Engine [cached since 0.005411s ago] ('applications', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 16:41:50,054 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 16:41:50,055 INFO sqlalchemy.engine.Engine [cached since 0.006074s ago] ('application_status_history', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 16:41:50,055 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 16:41:50,055 INFO sqlalchemy.engine.Engine [cached since 0.006526s ago] ('application_comments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 16:41:50,055 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 16:41:50,055 INFO sqlalchemy.engine.Engine [cached since 0.006794s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 16:41:50,055 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 16:41:50,055 INFO sqlalchemy.engine.Engine [cached since 0.006968s ago] ('settings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 16:41:50,056 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 16:41:50,056 INFO sqlalchemy.engine.Engine [cached since 0.007141s ago] ('blacklist', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 16:41:50,056 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 16:41:50,056 INFO sqlalchemy.engine.Engine [cached since 0.007305s ago] ('documents', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 16:41:50,056 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 16:41:50,056 INFO sqlalchemy.engine.Engine [cached since 0.007475s ago] ('payments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 16:41:50,057 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-07 16:41:50,057 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ('role', 'pg_catalog')
2026-02-07 16:41:50,057 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-07 16:41:50,057 INFO sqlalchemy.engine.Engine [cached since 0.0008175s ago] ('applicationstatus', 'pg_catalog')
2026-02-07 16:41:50,058 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-07 16:41:50,058 INFO sqlalchemy.engine.Engine [cached since 0.001219s ago] ('contactstatus', 'pg_catalog')
2026-02-07 16:41:50,058 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-07 16:41:50,058 INFO sqlalchemy.engine.Engine [cached since 0.00158s ago] ('rejectionreason', 'pg_catalog')
2026-02-07 16:41:50,059 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-07 16:41:50,059 INFO sqlalchemy.engine.Engine [cached since 0.002008s ago] ('blacklistreason', 'pg_catalog')
2026-02-07 16:41:50,059 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-07 16:41:50,059 INFO sqlalchemy.engine.Engine [cached since 0.002366s ago] ('blocktype', 'pg_catalog')
2026-02-07 16:41:50,059 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-07 16:41:50,059 INFO sqlalchemy.engine.Engine [cached since 0.002775s ago] ('documenttype', 'pg_catalog')
2026-02-07 16:41:50,060 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-07 16:41:50,060 INFO sqlalchemy.engine.Engine [cached since 0.003083s ago] ('paymentmethod', 'pg_catalog')
2026-02-07 16:41:50,060 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-02-07 16:41:50,060 INFO sqlalchemy.engine.Engine [cached since 0.003368s ago] ('paymentstatus', 'pg_catalog')
2026-02-07 16:41:50,060 INFO sqlalchemy.engine.Engine COMMIT
INFO:     Application startup complete.
[0;34mStarting Admin Panel (Port 3001)...[0m

[0;32m‚úÖ All services started![0m

üìç Services:
  - Backend API:    http://localhost:8000
  - API Docs:       http://localhost:8000/docs
  - Frontend:       http://localhost:3000
  - Admin Panel:    http://localhost:3001

Press Ctrl+C to stop all services


> dev
> nuxt dev --port 3001

‚îÇ
‚óè  Nuxt 4.3.0 (with Nitro 2.13.1, Vite 7.3.1 and Vue 3.5.27)

  ‚ûú Local:    http://localhost:3001/
  ‚ûú Network:  use --host to expose

  ‚ûú DevTools: press Shift + Option + D in the browser (v3.1.1)

‚Ñπ Re-optimizing dependencies because lockfile has changed
‚úî Vite client built in 17ms
‚úî Vite server built in 13ms
[nitro] ‚úî Nuxt Nitro server built in 237ms
‚Ñπ Vite client warmed up in 837ms
INFO:     127.0.0.1:54283 - "GET /docs HTTP/1.1" 200 OK
INFO:     127.0.0.1:54283 - "GET /openapi.json HTTP/1.1" 200 OK
INFO:     127.0.0.1:63202 - "OPTIONS /api/v1/auth/login HTTP/1.1" 200 OK
2026-02-07 19:06:37,595 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-07 19:06:37,615 INFO sqlalchemy.engine.Engine SELECT blacklist.id, blacklist.phone, blacklist.reason, blacklist.reason_note, blacklist.strike_count, blacklist.block_type, blacklist.blocked_until, blacklist.added_by, blacklist.created_at, blacklist.updated_at 
FROM blacklist 
WHERE blacklist.phone = $1::VARCHAR
2026-02-07 19:06:37,615 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('+998901111111',)
2026-02-07 19:06:37,633 INFO sqlalchemy.engine.Engine SELECT users.id, users.phone, users.email, users.password_hash, users.first_name, users.last_name, users.role, users.is_active, users.created_at, users.updated_at 
FROM users 
WHERE users.phone = $1::VARCHAR
2026-02-07 19:06:37,633 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('+998901111111',)
2026-02-07 19:06:37,826 INFO sqlalchemy.engine.Engine INSERT INTO audit_logs (id, user_id, ip_address, action, entity_type, entity_id, old_value, new_value, reason, details, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::UUID, $7::JSON, $8::JSON, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITHOUT TIME ZONE)
2026-02-07 19:06:37,826 INFO sqlalchemy.engine.Engine [generated in 0.00024s] (UUID('6f3bace1-a52a-4f27-8861-62da6651fd14'), None, None, 'user_login', 'user', UUID('63048648-dacc-4d94-b87f-3e1068869cdd'), 'null', 'null', None, 'null', datetime.datetime(2026, 2, 7, 14, 6, 37, 826234))
2026-02-07 19:06:37,829 INFO sqlalchemy.engine.Engine COMMIT
INFO:     127.0.0.1:63202 - "POST /api/v1/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:63202 - "OPTIONS /api/v1/users/me HTTP/1.1" 200 OK
2026-02-07 19:06:37,837 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-07 19:06:37,838 INFO sqlalchemy.engine.Engine SELECT users.id, users.phone, users.email, users.password_hash, users.first_name, users.last_name, users.role, users.is_active, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-07 19:06:37,838 INFO sqlalchemy.engine.Engine [generated in 0.00008s] (UUID('63048648-dacc-4d94-b87f-3e1068869cdd'),)
AUTH DEBUG: User +998901111111 role=admin normalized=admin
2026-02-07 19:06:37,839 INFO sqlalchemy.engine.Engine COMMIT
INFO:     127.0.0.1:63202 - "GET /api/v1/users/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:63202 - "OPTIONS /api/v1/admin/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:63202 - "OPTIONS /api/v1/applications?limit=5 HTTP/1.1" 200 OK
2026-02-07 19:06:37,866 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-07 19:06:37,867 INFO sqlalchemy.engine.Engine SELECT users.id, users.phone, users.email, users.password_hash, users.first_name, users.last_name, users.role, users.is_active, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-07 19:06:37,867 INFO sqlalchemy.engine.Engine [cached since 0.02901s ago] (UUID('63048648-dacc-4d94-b87f-3e1068869cdd'),)
AUTH DEBUG: User +998901111111 role=admin normalized=admin
2026-02-07 19:06:37,868 INFO sqlalchemy.engine.Engine SELECT sum(applications.final_price) AS sum_1 
FROM applications 
WHERE applications.status IN ($1::applicationstatus, $2::applicationstatus)
2026-02-07 19:06:37,868 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('DELIVERED', 'COMPLETED')
2026-02-07 19:06:37,879 INFO sqlalchemy.engine.Engine SELECT count(applications.id) AS count_1 
FROM applications 
WHERE applications.status IN ($1::applicationstatus, $2::applicationstatus, $3::applicationstatus, $4::applicationstatus, $5::applicationstatus, $6::applicationstatus)
2026-02-07 19:06:37,879 INFO sqlalchemy.engine.Engine [generated in 0.00008s] ('NEW', 'CONFIRMED', 'CONTRACT_SIGNED', 'PAID', 'IN_TRANSIT', 'WAITING_PAYMENT')
2026-02-07 19:06:37,882 INFO sqlalchemy.engine.Engine SELECT count(cars_catalog.id) AS count_1 
FROM cars_catalog 
WHERE cars_catalog.is_active = true
2026-02-07 19:06:37,882 INFO sqlalchemy.engine.Engine [generated in 0.00010s] ()
2026-02-07 19:06:37,883 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-07 19:06:37,883 INFO sqlalchemy.engine.Engine SELECT users.id, users.phone, users.email, users.password_hash, users.first_name, users.last_name, users.role, users.is_active, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-07 19:06:37,883 INFO sqlalchemy.engine.Engine [cached since 0.04531s ago] (UUID('63048648-dacc-4d94-b87f-3e1068869cdd'),)
2026-02-07 19:06:37,885 INFO sqlalchemy.engine.Engine SELECT count(applications.id) AS count_1 
FROM applications
2026-02-07 19:06:37,885 INFO sqlalchemy.engine.Engine [generated in 0.00006s] ()
2026-02-07 19:06:37,885 INFO sqlalchemy.engine.Engine SELECT count(applications.id) AS count_1 
FROM applications 
WHERE applications.status IN ($1::applicationstatus, $2::applicationstatus)
2026-02-07 19:06:37,885 INFO sqlalchemy.engine.Engine [cached since 0.006691s ago] ('COMPLETED', 'DELIVERED')
2026-02-07 19:06:37,886 INFO sqlalchemy.engine.Engine SELECT audit_logs.id, audit_logs.user_id, audit_logs.ip_address, audit_logs.action, audit_logs.entity_type, audit_logs.entity_id, audit_logs.old_value, audit_logs.new_value, audit_logs.reason, audit_logs.details, audit_logs.created_at 
FROM audit_logs ORDER BY audit_logs.created_at DESC 
 LIMIT $1::INTEGER
2026-02-07 19:06:37,886 INFO sqlalchemy.engine.Engine [generated in 0.00006s] (5,)
2026-02-07 19:06:37,889 INFO sqlalchemy.engine.Engine SELECT count(applications.id) AS count_1 
FROM applications 
WHERE applications.status = $1::applicationstatus
2026-02-07 19:06:37,889 INFO sqlalchemy.engine.Engine [generated in 0.00005s] ('CANCELLED',)
2026-02-07 19:06:37,890 INFO sqlalchemy.engine.Engine COMMIT
INFO:     127.0.0.1:63206 - "GET /api/v1/admin/stats HTTP/1.1" 200 OK
AUTH DEBUG: User +998901111111 role=admin normalized=admin
2026-02-07 19:06:37,900 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT applications.id AS id, applications.client_id AS client_id, applications.car_id AS car_id, applications.operator_id AS operator_id, applications.manager_id AS manager_id, applications.source_price_snapshot AS source_price_snapshot, applications.markup_percent AS markup_percent, applications.final_price AS final_price, applications.status AS status, applications.contact_status AS contact_status, applications.checklist AS checklist, applications.rejection_reason AS rejection_reason, applications.rejection_note AS rejection_note, applications.operator_comment AS operator_comment, applications.internal_note AS internal_note, applications.car_confirmed AS car_confirmed, applications.car_confirmed_by AS car_confirmed_by, applications.car_confirmed_at AS car_confirmed_at, applications.cargo_booking_number AS cargo_booking_number, applications.cargo_notes AS cargo_notes, applications.created_at AS created_at, applications.updated_at AS updated_at 
FROM applications ORDER BY applications.created_at DESC) AS anon_1
2026-02-07 19:06:37,900 INFO sqlalchemy.engine.Engine [generated in 0.00009s] ()
2026-02-07 19:06:37,906 INFO sqlalchemy.engine.Engine SELECT applications.id, applications.client_id, applications.car_id, applications.operator_id, applications.manager_id, applications.source_price_snapshot, applications.markup_percent, applications.final_price, applications.status, applications.contact_status, applications.checklist, applications.rejection_reason, applications.rejection_note, applications.operator_comment, applications.internal_note, applications.car_confirmed, applications.car_confirmed_by, applications.car_confirmed_at, applications.cargo_booking_number, applications.cargo_notes, applications.created_at, applications.updated_at, users_1.id AS id_1, users_1.phone, users_1.email, users_1.password_hash, users_1.first_name, users_1.last_name, users_1.role, users_1.is_active, users_1.created_at AS created_at_1, users_1.updated_at AS updated_at_1, cars_catalog_1.id AS id_2, cars_catalog_1.source, cars_catalog_1.source_url, cars_catalog_1.external_id, cars_catalog_1.brand, cars_catalog_1.make, cars_catalog_1.model, cars_catalog_1.year, cars_catalog_1.trim, cars_catalog_1.body_type, cars_catalog_1.mileage, cars_catalog_1.exterior_color, cars_catalog_1.interior_color, cars_catalog_1.transmission, cars_catalog_1.drivetrain, cars_catalog_1.fuel_type, cars_catalog_1.engine, cars_catalog_1.mpg_city, cars_catalog_1.mpg_highway, cars_catalog_1.vin, cars_catalog_1.source_price_usd, cars_catalog_1.final_price_usd, cars_catalog_1.dealer, cars_catalog_1.location_city, cars_catalog_1.location_state, cars_catalog_1.location, cars_catalog_1.image_url, cars_catalog_1.photos, cars_catalog_1.features, cars_catalog_1.is_active AS is_active_1, cars_catalog_1.parsed_at, cars_catalog_1.last_seen_at, cars_catalog_1.source_updated_at, cars_catalog_1.created_at AS created_at_2, cars_catalog_1.updated_at AS updated_at_2 
FROM applications LEFT OUTER JOIN users AS users_1 ON users_1.id = applications.client_id LEFT OUTER JOIN cars_catalog AS cars_catalog_1 ON cars_catalog_1.id = applications.car_id ORDER BY applications.created_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-02-07 19:06:37,906 INFO sqlalchemy.engine.Engine [generated in 0.00018s] (20, 0)
2026-02-07 19:06:37,916 INFO sqlalchemy.engine.Engine COMMIT
INFO:     127.0.0.1:63202 - "GET /api/v1/applications?limit=5 HTTP/1.1" 200 OK
./start-all.sh: line 79: 57252 Killed: 9               python3 -m uvicorn app.main:app --reload --port 8000  (wd: ~/Desktop/stl-admin/backend)
./start-all.sh: line 79: 57260 Killed: 9               npm run dev -- --port 3001  (wd: ~/Desktop/stl-admin/admin)
